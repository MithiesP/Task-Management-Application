<!-- Main Content Area -->
<main class="flex-1 overflow-y-auto p-6 bg-gray-50">
  <!-- Tabs Navigation -->
  <div class="flex border-b border-gray-200 mb-6">
    <button 
      class="tab-button px-4 py-2 text-sm font-medium" 
      [class.active]="activeTab === 'projects'"
      (click)="setActiveTab('projects')">
      Projects
    </button>
    <button 
      class="tab-button px-4 py-2 text-sm font-medium" 
      [class.active]="activeTab === 'sprints'"
      (click)="setActiveTab('sprints')">
      Sprints
    </button>
    <button 
      class="tab-button px-4 py-2 text-sm font-medium" 
      [class.active]="activeTab === 'team-projects'"
      (click)="setActiveTab('team-projects')">
      Team Projects
    </button>
  </div>

  <!-- Projects Tab Content -->
  <div *ngIf="activeTab === 'projects'" class="tab-content active">
    <!-- Search, Filter and Add Project -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"> 
      <div class="relative w-full md:w-64">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <fa-icon [icon]="faSearch" class="text-gray-400 text-sm"></fa-icon>
        </div>
        <input 
          type="text" 
          [(ngModel)]="searchProjectsTerm"
          (ngModelChange)="applyProjectsFilters()"
          class="block w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm" 
          placeholder="Search projects..."> 
      </div>
      <div class="flex items-center gap-3 w-full md:w-auto">
        <div class="relative">
          <button 
            id="filterProjectsBtn" 
            class="flex items-center gap-1 bg-white hover:bg-gray-50 text-gray-700 py-2 px-3 rounded-lg border border-gray-300 text-sm"
            (click)="filterProjectsDropdown = !filterProjectsDropdown">
            <fa-icon [icon]="faFilter" class="mr-1"></fa-icon>
            Filter
          </button>
          <div 
            id="projectsFilterDropdown" 
            class="filter-dropdown" 
            [class.open]="filterProjectsDropdown">
            <div class="space-y-2">
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Status</label>
                <select 
                  [(ngModel)]="statusFilter"
                  class="block w-full px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">All Statuses</option>
                  <option value="planning">Planning</option>
                  <option value="in-progress">In Progress</option>
                  <option value="completed">Completed</option>
                  <option value="on-hold">On Hold</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Priority</label>
                <select 
                  [(ngModel)]="priorityFilter"
                  class="block w-full px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">All Priorities</option>
                  <option value="high">High</option>
                  <option value="medium">Medium</option>
                  <option value="low">Low</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Team</label>
                <select 
                  [(ngModel)]="teamFilter"
                  class="block w-full px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">All Teams</option>
                  <option value="Development Team">Development Team</option>
                  <option value="Design Team">Design Team</option>
                  <option value="Marketing Team">Marketing Team</option>
                </select>
              </div>
              <div class="flex justify-end gap-1">
                <button 
                  (click)="resetProjectsFilters(); filterProjectsDropdown = false"
                  class="px-2 py-1 text-xs text-gray-600 hover:text-gray-800">
                  Reset
                </button>
                <button 
                  (click)="applyProjectsFilters(); filterProjectsDropdown = false"
                  class="px-2 py-1 bg-indigo-600 text-white text-xs rounded-md hover:bg-indigo-700">
                  Apply
                </button>
              </div>
            </div>
          </div>
        </div>
        <button 
          (click)="openAddProjectModal()"
          class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-3 rounded-lg flex items-center justify-center text-sm">
          <fa-icon [icon]="faPlus" class="mr-2"></fa-icon> New Project
        </button>
      </div>
    </div>

    <!-- Projects Table -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden mb-4">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Project</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Team</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Start Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deadline</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progress</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
              <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let project of paginatedProjects" class="table-row">
              <td class="px-6 py-3 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="text-sm font-medium text-gray-900">{{ project.name }}</div>
                  <fa-icon 
                    [icon]="project.priority === 'high' ? faExclamationCircle : 
                            project.priority === 'medium' ? faExclamationTriangle : faInfoCircle"
                    [ngClass]="getPriorityIcon(project.priority)"
                    class="ml-1 text-xs"></fa-icon>
                </div>
              </td>
              <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">{{ project.team }}</td>
              <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">{{ formatDate(project.startDate) }}</td>
              <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">{{ formatDate(project.deadline) }}</td>
              <td class="px-6 py-3 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="w-20 mr-2">
                    <div class="w-full bg-gray-200 rounded-full h-1.5">
                      <div class="bg-indigo-600 h-1.5 rounded-full" [style.width]="project.progress + '%'"></div>
                    </div>
                  </div>
                  <span class="text-xs text-gray-500">{{ project.progress }}%</span>
                </div>
              </td>
              <td class="px-6 py-3 whitespace-nowrap">
                <span class="status-badge" [ngClass]="getStatusClass(project.status)">
                  {{ project.status.replace('-', ' ') }}
                </span>
              </td>
              <td class="px-6 py-3 whitespace-nowrap text-right text-sm font-medium">
                <button 
                  (click)="viewProjectDetails(project.id)"
                  class="text-indigo-600 hover:text-indigo-900 mr-2">View</button>
                <button 
                  (click)="editProject(project.id)"
                  class="text-gray-600 hover:text-gray-900">Edit</button>
              </td>
            </tr>
            <tr *ngIf="filteredProjects.length === 0">
              <td colspan="7" class="px-6 py-4 text-center text-sm text-gray-500">No projects found</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between px-2 py-3">
      <div class="text-sm text-gray-500">
        Showing {{(currentPage - 1) * itemsPerPage + 1}} to {{getToEntryNumber()}} of {{filteredProjects.length}} entries
      </div>
      <div class="flex space-x-1" *ngIf="totalPages > 1">
        <button 
          (click)="changePage(currentPage - 1)"
          [disabled]="currentPage === 1"
          class="pagination-btn"
          [class.disabled]="currentPage === 1">
          Previous
        </button>
        <button 
          *ngFor="let page of getPageNumbers()"
          (click)="changePage(page)"
          class="pagination-btn"
          [class.active]="currentPage === page">
          {{page}}
        </button>
        <button 
          (click)="changePage(currentPage + 1)"
          [disabled]="currentPage === totalPages"
          class="pagination-btn"
          [class.disabled]="currentPage === totalPages">
          Next
        </button>
      </div>
    </div>
  </div>

  <!-- Sprints Tab Content -->
  <div *ngIf="activeTab === 'sprints'" class="tab-content">
    <!-- Search, Filter and Add Sprint -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"> 
      <div class="relative w-full md:w-64">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <fa-icon [icon]="faSearch" class="text-gray-400 text-sm"></fa-icon>
        </div>
        <input 
          type="text" 
          [(ngModel)]="searchSprintsTerm"
          (ngModelChange)="applySprintsFilters()"
          class="block w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm" 
          placeholder="Search sprints..."> 
      </div>
      <div class="flex items-center gap-3 w-full md:w-auto">
        <div class="relative">
          <button 
            id="filterSprintsBtn" 
            class="flex items-center gap-1 bg-white hover:bg-gray-50 text-gray-700 py-2 px-3 rounded-lg border border-gray-300 text-sm"
            (click)="filterSprintsDropdown = !filterSprintsDropdown">
            <fa-icon [icon]="faFilter" class="mr-1"></fa-icon>
            Filter
          </button>
          <div 
            id="sprintsFilterDropdown" 
            class="filter-dropdown" 
            [class.open]="filterSprintsDropdown">
            <div class="space-y-2">
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Status</label>
                <select 
                  [(ngModel)]="sprintStatusFilter"
                  class="block w-full px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">All Statuses</option>
                  <option value="active">Active</option>
                  <option value="upcoming">Upcoming</option>
                  <option value="completed">Completed</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Project</label>
                <select 
                  [(ngModel)]="sprintProjectFilter"
                  class="block w-full px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">All Projects</option>
                  <option *ngFor="let project of projects" [value]="project.name">{{ project.name }}</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Due Date</label>
                <select 
                  [(ngModel)]="sprintDueDateFilter"
                  class="block w-full px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">All Dates</option>
                  <option value="today">Today</option>
                  <option value="week">This Week</option>
                  <option value="overdue">Overdue</option>
                </select>
              </div>
              <div class="flex justify-end gap-1">
                <button 
                  (click)="resetSprintsFilters(); filterSprintsDropdown = false"
                  class="px-2 py-1 text-xs text-gray-600 hover:text-gray-800">
                  Reset
                </button>
                <button 
                  (click)="applySprintsFilters(); filterSprintsDropdown = false"
                  class="px-2 py-1 bg-indigo-600 text-white text-xs rounded-md hover:bg-indigo-700">
                  Apply
                </button>
              </div>
            </div>
          </div>
        </div>
        <button 
          (click)="showAddSprintModal = true"
          class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-3 rounded-lg flex items-center justify-center text-sm">
          <fa-icon [icon]="faPlus" class="mr-2"></fa-icon> New Sprint
        </button>
      </div>
    </div>

    <!-- Sprints List -->
    <div class="space-y-4">
      <div 
        *ngFor="let sprint of filteredSprints"
        class="bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"
        [ngClass]="getSprintBorderClass(sprint.status)">
        <div class="p-4">
          <div class="flex justify-between items-start">
            <div>
              <h3 class="text-sm font-medium text-gray-900">{{ sprint.name }}</h3>
              <p class="text-xs text-gray-500 mt-1">{{ sprint.project }}</p>
            </div>
            <span 
              class="text-xs px-2 py-1 rounded-full"
              [ngClass]="{
                'bg-green-100 text-green-800': sprint.status === 'completed',
                'bg-blue-100 text-blue-800': sprint.status === 'active',
                'bg-yellow-100 text-yellow-800': sprint.status === 'upcoming'
              }">
              {{ sprint.status.charAt(0).toUpperCase() + sprint.status.slice(1) }}
            </span>
          </div>
          <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
            <div>
              <p class="text-gray-500">Start Date</p>
              <p class="text-gray-900">{{ formatDate(sprint.startDate) }}</p>
            </div>
            <div>
              <p class="text-gray-500">End Date</p>
              <p class="text-gray-900">{{ formatDate(sprint.endDate) }}</p>
            </div>
          </div>
          <div class="mt-3">
            <p class="text-xs text-gray-500">Sprint Goal</p>
            <p class="text-xs text-gray-700 mt-1">{{ sprint.goal }}</p>
          </div>
          <div class="mt-4 flex justify-between items-center">
            <div class="flex items-center">
              <div class="w-16 mr-2">
                <div class="w-full bg-gray-200 rounded-full h-1.5">
                  <div 
                    class="bg-indigo-600 h-1.5 rounded-full" 
                    [style.width]="(sprint.stats.tasksCompleted / sprint.stats.totalTasks) * 100 + '%'"></div>
                </div>
              </div>
              <span class="text-xs text-gray-500">{{ sprint.stats.tasksCompleted }}/{{ sprint.stats.totalTasks }} tasks</span>
            </div>
            <div class="flex space-x-2">
              <button 
                (click)="viewSprintDetails(sprint.id)"
                class="text-xs text-indigo-600 hover:text-indigo-900">View</button>
              <button 
                (click)="editSprint(sprint.id)"
                class="text-xs text-gray-600 hover:text-gray-900">Edit</button>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="filteredSprints.length === 0" class="text-center text-sm text-gray-500 py-4">
        No sprints found
      </div>
    </div>
  </div>

  <!-- Team Projects Tab Content -->
  <div *ngIf="activeTab === 'team-projects'" class="tab-content">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Team Projects -->
      <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm border border-gray-100">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">Team Projects</h3>
          <button 
            (click)="openCreateTeamProjectModal()"
            class="bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-3 rounded-lg text-sm">
            Create Team Project
          </button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Project</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Team</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Start Date</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deadline</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr *ngFor="let project of projects" class="hover:bg-gray-50">
                <td class="px-6 py-3 whitespace-nowrap text-sm font-medium text-gray-900">{{ project.name }}</td>
                <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">{{ project.team }}</td>
                <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">{{ formatDate(project.startDate) }}</td>
                <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">{{ formatDate(project.deadline) }}</td>
                <td class="px-6 py-3 whitespace-nowrap">
                  <span class="status-badge" [ngClass]="getStatusClass(project.status)">
                    {{ project.status.replace('-', ' ') }}
                  </span>
                </td>
                <td class="px-6 py-3 whitespace-nowrap text-right text-sm font-medium">
                  <button 
                    (click)="viewProjectDetails(project.id)"
                    class="text-indigo-600 hover:text-indigo-900">View</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Team Leads Status -->
      <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Team Leads Status</h3>
        <div class="space-y-4">
          <!-- Development Team -->
          <div class="border border-gray-200 rounded-lg p-4">
            <div class="flex justify-between items-center mb-2">
              <h4 class="text-sm font-medium text-gray-700">Development Team</h4>
              <span class="text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800">3 Projects</span>
            </div>
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-2">
                  <span class="text-xs text-gray-600">JD</span>
                </div>
                <span class="text-sm">John Doe</span>
              </div>
              <span class="text-xs team-lead-busy">Busy</span>
            </div>
          </div>
          
          <!-- Design Team -->
          <div class="border border-gray-200 rounded-lg p-4">
            <div class="flex justify-between items-center mb-2">
              <h4 class="text-sm font-medium text-gray-700">Design Team</h4>
              <span class="text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800">1 Project</span>
            </div>
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-2">
                  <span class="text-xs text-gray-600">JS</span>
                </div>
                <span class="text-sm">Jane Smith</span>
              </div>
              <span class="text-xs team-lead-available">Available</span>
            </div>
          </div>
          
          <!-- Marketing Team -->
          <div class="border border-gray-200 rounded-lg p-4">
            <div class="flex justify-between items-center mb-2">
              <h4 class="text-sm font-medium text-gray-700">Marketing Team</h4>
              <span class="text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800">2 Projects</span>
            </div>
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-2">
                  <span class="text-xs text-gray-600">ED</span>
                </div>
                <span class="text-sm">Emily Davis</span>
              </div>
              <span class="text-xs team-lead-busy">Busy</span>
            </div>
          </div>
          
          <!-- Quick Assign -->
          <div class="border border-gray-200 rounded-lg p-4">
            <h4 class="text-sm font-medium text-gray-700 mb-3">Quick Assign</h4>
            <div class="space-y-3">
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Select Team</label>
                <select [(ngModel)]="selectedTeam" (change)="onTeamChange()" class="block w-full px-3 py-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">Select Team</option>
                  <option value="development">Development Team</option>
                  <option value="design">Design Team</option>
                  <option value="marketing">Marketing Team</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500 mb-1">Select Project</label>
                <select [(ngModel)]="selectedProject" class="block w-full px-3 py-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">Select Project</option>
                  <option *ngFor="let project of filteredProjectsForTeam" [value]="project.id">{{ project.name }}</option>
                </select>
              </div>
              <div *ngIf="selectedTeamLead" id="teamLeadStatusContainer" class="mt-2">
                <p class="text-xs text-gray-500 mb-1">Team Lead Status: 
                  <span id="teamLeadStatus" [ngClass]="selectedTeamLead.status === 'busy' ? 'team-lead-busy' : 'team-lead-available'">
                    {{ selectedTeamLead.status.charAt(0).toUpperCase() + selectedTeamLead.status.slice(1) }}
                  </span>
                </p>
                <p class="text-xs text-gray-500" id="teamLeadCurrentProjects">
                  Current Projects: {{ selectedTeamLead.projects.join(', ') }}
                </p>
              </div>
              <button (click)="assignProject()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-3 rounded-lg text-sm">
                Assign Project
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Project Modal -->
  <div *ngIf="showAddProjectModal" class="modal fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">Create New Project</h3>
          <button (click)="closeAllModals()" class="text-gray-400 hover:text-gray-600 text-base">
            <fa-icon [icon]="faTimes"></fa-icon>
          </button>
        </div>
        <form (ngSubmit)="createNewProject()" #addProjectForm="ngForm">
          <div class="space-y-4">
            <div>
              <label for="projectName" class="block text-xs font-medium text-gray-500 required-field">Project Name</label>
              <input type="text" id="projectName" [(ngModel)]="newProject.name" name="projectName" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
            </div>
            <div>
              <label for="projectDescription" class="block text-xs font-medium text-gray-500 required-field">Description</label>
              <textarea id="projectDescription" rows="3" [(ngModel)]="newProject.description" name="projectDescription" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"></textarea>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="projectStartDate" class="block text-xs font-medium text-gray-500 required-field">Start Date</label>
                <input type="date" id="projectStartDate" [(ngModel)]="newProject.startDate" name="projectStartDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
              <div>
                <label for="projectEndDate" class="block text-xs font-medium text-gray-500 required-field">End Date</label>
                <input type="date" id="projectEndDate" [(ngModel)]="newProject.endDate" name="projectEndDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="projectTeam" class="block text-xs font-medium text-gray-500 required-field">Assigned Team</label>
                <select id="projectTeam" [(ngModel)]="newProject.team" name="projectTeam" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">Select Team</option>
                  <option value="Development Team">Development Team</option>
                  <option value="Design Team">Design Team</option>
                  <option value="Marketing Team">Marketing Team</option>
                </select>
              </div>
              <div>
                <label for="projectPriority" class="block text-xs font-medium text-gray-500">Priority</label>
                <select id="projectPriority" [(ngModel)]="newProject.priority" name="projectPriority" 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
            </div>
            <div>
              <label for="projectManager" class="block text-xs font-medium text-gray-500 required-field">Project Manager</label>
              <select id="projectManager" [(ngModel)]="newProject.manager" name="projectManager" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                <option value="">Select Project Manager</option>
                <option value="John Doe">John Doe</option>
                <option value="Jane Smith">Jane Smith</option>
                <option value="Mike Johnson">Mike Johnson</option>
                <option value="Emily Davis">Emily Davis</option>
              </select>
            </div>
            <div>
              <label for="projectBudget" class="block text-xs font-medium text-gray-500">Budget ($)</label>
              <input type="number" id="projectBudget" [(ngModel)]="newProject.budget" name="projectBudget" 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm" min="0" value="10000">
            </div>
            <div>
              <label for="projectFiles" class="block text-xs font-medium text-gray-500">Project Files</label>
              <input type="file" id="projectFiles" (change)="onFileSelected($event)" multiple 
                class="block w-full px-3 py-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              <p class="mt-1 text-xs text-gray-500">Upload any relevant files for this project (PDF, DOC, XLS, etc.)</p>
            </div>
            <div class="mt-6 flex justify-end space-x-3">
              <button type="button" (click)="closeAllModals()" class="px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50">
                Cancel
              </button>
              <button type="submit" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700">
                Create Project
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Add Sprint Modal -->
  <div *ngIf="showAddSprintModal" class="modal fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">Create New Sprint</h3>
          <button (click)="closeAllModals()" class="text-gray-400 hover:text-gray-600 text-base">
            <fa-icon [icon]="faTimes"></fa-icon>
          </button>
        </div>
        <form (ngSubmit)="createNewSprint()" #addSprintForm="ngForm">
          <div class="space-y-4">
            <div>
              <label for="sprintName" class="block text-xs font-medium text-gray-500 required-field">Sprint Name</label>
              <input type="text" id="sprintName" [(ngModel)]="newSprint.name" name="sprintName" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
            </div>
            <div>
              <label for="sprintDescription" class="block text-xs font-medium text-gray-500">Description (Optional)</label>
              <textarea id="sprintDescription" rows="3" [(ngModel)]="newSprint.description" name="sprintDescription" 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"></textarea>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="sprintProject" class="block text-xs font-medium text-gray-500 required-field">Project</label>
                <select id="sprintProject" [(ngModel)]="newSprint.project" name="sprintProject" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">Select Project</option>
                  <option *ngFor="let project of projects" [value]="project.name">{{ project.name }}</option>
                </select>
              </div>
              <div>
                <label for="sprintStatus" class="block text-xs font-medium text-gray-500">Status</label>
                <select id="sprintStatus" [(ngModel)]="newSprint.status" name="sprintStatus" 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="upcoming">Upcoming</option>
                  <option value="active">Active</option>
                  <option value="completed">Completed</option>
                </select>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="sprintStartDate" class="block text-xs font-medium text-gray-500 required-field">Start Date</label>
                <input type="date" id="sprintStartDate" [(ngModel)]="newSprint.startDate" name="sprintStartDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
              <div>
                <label for="sprintEndDate" class="block text-xs font-medium text-gray-500 required-field">End Date</label>
                <input type="date" id="sprintEndDate" [(ngModel)]="newSprint.endDate" name="sprintEndDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
            </div>
            <div>
              <label for="sprintGoal" class="block text-xs font-medium text-gray-500">Sprint Goal</label>
              <textarea id="sprintGoal" rows="2" [(ngModel)]="newSprint.goal" name="sprintGoal" 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"></textarea>
            </div>
            <div>
              <label for="sprintTasks" class="block text-xs font-medium text-gray-500">Add Tasks (Optional)</label>
              <select id="sprintTasks" multiple [(ngModel)]="newSprint.selectedTasks" name="sprintTasks"
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                <option value="Design Homepage">Design Homepage</option>
                <option value="Develop Frontend">Develop Frontend</option>
                <option value="API Integration">API Integration</option>
                <option value="Content Migration">Content Migration</option>
                <option value="UI Design">UI Design</option>
                <option value="Backend Setup">Backend Setup</option>
              </select>
              <p class="mt-1 text-xs text-gray-500">Hold Ctrl/Cmd to select multiple tasks</p>
            </div>
            <div class="mt-6 flex justify-end space-x-3">
              <button type="button" (click)="closeAllModals()" class="px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50">
                Cancel
              </button>
              <button type="submit" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700">
                Create Sprint
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Create Team Project Modal -->
  <div *ngIf="showCreateTeamProjectModal" class="modal fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">Create Team Project</h3>
          <button (click)="closeAllModals()" class="text-gray-400 hover:text-gray-600 text-base">
            <fa-icon [icon]="faTimes"></fa-icon>
          </button>
        </div>
        <form (ngSubmit)="createTeamProject()" #createTeamProjectForm="ngForm">
          <div class="space-y-4">
            <div>
              <label for="teamProjectName" class="block text-xs font-medium text-gray-500 required-field">Project Name</label>
              <input type="text" id="teamProjectName" [(ngModel)]="newTeamProject.name" name="teamProjectName" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
            </div>
            <div>
              <label for="teamProjectDescription" class="block text-xs font-medium text-gray-500 required-field">Description</label>
              <textarea id="teamProjectDescription" rows="3" [(ngModel)]="newTeamProject.description" name="teamProjectDescription" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"></textarea>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="teamProjectStartDate" class="block text-xs font-medium text-gray-500 required-field">Start Date</label>
                <input type="date" id="teamProjectStartDate" [(ngModel)]="newTeamProject.startDate" name="teamProjectStartDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
              <div>
                <label for="teamProjectEndDate" class="block text-xs font-medium text-gray-500 required-field">End Date</label>
                <input type="date" id="teamProjectEndDate" [(ngModel)]="newTeamProject.endDate" name="teamProjectEndDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="teamProjectTeam" class="block text-xs font-medium text-gray-500 required-field">Assigned Team</label>
                <select id="teamProjectTeam" [(ngModel)]="newTeamProject.team" name="teamProjectTeam" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">Select Team</option>
                  <option value="development">Development Team</option>
                  <option value="design">Design Team</option>
                  <option value="marketing">Marketing Team</option>
                </select>
              </div>
              <div>
                <label for="teamProjectPriority" class="block text-xs font-medium text-gray-500">Priority</label>
                <select id="teamProjectPriority" [(ngModel)]="newTeamProject.priority" name="teamProjectPriority" 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
            </div>
            <div>
              <label for="teamProjectManager" class="block text-xs font-medium text-gray-500 required-field">Project Manager</label>
              <select id="teamProjectManager" [(ngModel)]="newTeamProject.manager" name="teamProjectManager" required 
                (change)="checkTeamLeadAvailability()"
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                <option value="">Select Project Manager</option>
                <option value="john">John Doe</option>
                <option value="jane">Jane Smith</option>
                <option value="mike">Mike Johnson</option>
              </select>
              <p class="mt-1 text-xs" [ngClass]="{'text-red-600': teamLeadAvailability === 'busy', 'text-green-600': teamLeadAvailability === 'available'}" 
                *ngIf="teamLeadAvailability">
                Status: {{ teamLeadAvailability === 'busy' ? 'Busy' : 'Available' }}
                <span *ngIf="teamLeadAvailability === 'busy'">(Currently managing {{ currentTeamLeadProjects }} projects)</span>
              </p>
            </div>
            <div>
              <label for="teamProjectFiles" class="block text-xs font-medium text-gray-500">Project Files</label>
              <input type="file" id="teamProjectFiles" (change)="onTeamProjectFileSelected($event)" multiple 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              <p class="mt-1 text-xs text-gray-500">Upload any relevant files for this project (PDF, DOC, XLS, etc.)</p>
            </div>
            <div class="mt-6 flex justify-end space-x-3">
              <button type="button" (click)="closeAllModals()" class="px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50">
                Cancel
              </button>
              <button type="submit" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700">
                Create Project
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Project Details Modal -->
  <div *ngIf="showProjectDetailsModal" class="modal fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">{{ selectedProject?.name }}</h3>
          <button (click)="closeAllModals()" class="text-gray-400 hover:text-gray-600 text-base">
            <fa-icon [icon]="faTimes"></fa-icon>
          </button>
        </div>
        <div class="flex flex-col md:flex-row gap-6">
          <div class="w-full md:w-2/3">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
              <div>
                <label class="block text-xs font-medium text-gray-500">Project ID</label>
                <p class="text-sm mt-1 font-medium">{{ selectedProject?.id }}</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">Status</label>
                <p class="text-sm mt-1" [ngClass]="{
                  'text-green-600': selectedProject?.status === 'completed',
                  'text-blue-600': selectedProject?.status === 'in-progress',
                  'text-yellow-600': selectedProject?.status === 'planning',
                  'text-gray-600': selectedProject?.status === 'on-hold'
                }">
                  {{ selectedProject?.status?.replace('-', ' ') | titlecase }}
                </p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">Start Date</label>
                <p class="text-sm mt-1">{{ formatDate(selectedProject?.startDate) }}</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">Deadline</label>
                <p class="text-sm mt-1">{{ formatDate(selectedProject?.deadline) }}</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">Project Manager</label>
                <p class="text-sm mt-1">{{ selectedProject?.manager }}</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">Assigned Team</label>
                <p class="text-sm mt-1">{{ selectedProject?.team }}</p>
              </div>
            </div>
            <div class="mb-4">
              <label class="block text-xs font-medium text-gray-500">Description</label>
              <p class="text-sm mt-1">{{ selectedProject?.description }}</p>
            </div>
            <div class="mb-4">
              <div class="flex justify-between items-center mb-1">
                <label class="block text-xs font-medium text-gray-500">Progress</label>
                <span class="text-xs font-medium">{{ selectedProject?.progress }}%</span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-1.5">
                <div class="bg-indigo-600 h-1.5 rounded-full" [style.width]="selectedProject?.progress + '%'"></div>
              </div>
            </div>
            <div class="mb-4">
              <label class="block text-xs font-medium text-gray-500 mb-1">Project Files</label>
              <div class="border border-gray-200 rounded-lg p-3">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center">
                    <fa-icon [icon]="faFilePdf" class="text-red-500 text-sm mr-2"></fa-icon>
                    <span class="text-xs">Project_Specifications.pdf</span>
                  </div>
                  <div class="flex space-x-2">
                    <button class="text-indigo-600 hover:text-indigo-800 text-xs">Download</button>
                    <button class="text-red-600 hover:text-red-800 text-xs">Delete</button>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center">
                    <fa-icon [icon]="faFileWord" class="text-blue-500 text-sm mr-2"></fa-icon>
                    <span class="text-xs">Requirements_Document.docx</span>
                  </div>
                  <div class="flex space-x-2">
                    <button class="text-indigo-600 hover:text-indigo-800 text-xs">Download</button>
                    <button class="text-red-600 hover:text-red-800 text-xs">Delete</button>
                  </div>
                </div>
              </div>
              <div class="mt-2">
                <label class="block text-xs font-medium text-gray-500 mb-1">Upload New Files</label>
                <input type="file" class="block w-full px-3 py-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm" multiple>
              </div>
            </div>
          </div>
          <div class="w-full md:w-1/3">
            <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
              <h4 class="text-sm font-medium text-gray-800 mb-3">Project Statistics</h4>
              <div class="space-y-3">
                <div>
                  <div class="flex justify-between text-xs mb-1">
                    <span>Tasks Completed</span>
                    <span>{{ selectedProject?.stats?.tasksCompleted }}/{{ selectedProject?.stats?.totalTasks }}</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="bg-green-500 h-1.5 rounded-full" 
                      [style.width]="(selectedProject?.stats?.tasksCompleted / selectedProject?.stats?.totalTasks) * 100 + '%'"></div>
                  </div>
                </div>
                <div>
                  <div class="flex justify-between text-xs mb-1">
                    <span>Time Spent</span>
                    <span>{{ selectedProject?.stats?.timeSpent }} / {{ selectedProject?.stats?.estimatedTime }} hours</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="bg-blue-500 h-1.5 rounded-full" 
                      [style.width]="(selectedProject?.stats?.timeSpent / selectedProject?.stats?.estimatedTime) * 100 + '%'"></div>
                  </div>
                </div>
                <div>
                  <div class="flex justify-between text-xs mb-1">
                    <span>Budget Used</span>
                    <span>${{ selectedProject?.stats?.budgetUsed }}/${{ selectedProject?.stats?.totalBudget }}</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="bg-purple-500 h-1.5 rounded-full" 
                      [style.width]="(selectedProject?.stats?.budgetUsed / selectedProject?.stats?.totalBudget) * 100 + '%'"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-4 bg-gray-50 rounded-lg p-3 border border-gray-200">
              <h4 class="text-sm font-medium text-gray-800 mb-3">Team Members</h4>
              <div class="space-y-2">
                <div class="flex items-center" *ngFor="let member of teamMembers">
                  <div class="flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 text-xs">
                    {{ getInitials(member.name) }}
                  </div>
                  <div class="ml-2">
                    <p class="text-xs font-medium text-gray-900">{{ member.name }}</p>
                    <p class="text-xs text-gray-500">{{ member.role }}</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-4 bg-gray-50 rounded-lg p-3 border border-gray-200">
              <div class="flex justify-between items-center mb-2">
                <h4 class="text-sm font-medium text-gray-800">Sprints</h4>
                <button class="text-xs text-indigo-600 hover:text-indigo-800">View All</button>
              </div>
              <div class="space-y-2">
                <div class="flex items-center justify-between text-xs" *ngFor="let sprint of selectedProject?.sprints">
                  <span>{{ sprint.name }}</span>
                  <span class="px-2 py-1 rounded-full" 
                    [ngClass]="{
                      'bg-green-100 text-green-800': sprint.status === 'completed',
                      'bg-blue-100 text-blue-800': sprint.status === 'active',
                      'bg-yellow-100 text-yellow-800': sprint.status === 'upcoming'
                    }">
                    {{ sprint.status | titlecase }}
                  </span>
                </div>
                <p class="text-xs text-gray-500" *ngIf="!selectedProject?.sprints?.length">No sprints yet</p>
              </div>
            </div>
          </div>
        </div>
        <div class="mt-6 flex justify-end space-x-3">
          <button (click)="deleteProject()" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700">
            Delete Project
          </button>
          <button (click)="editProject(selectedProject?.id)" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700">
            Edit Project
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Project Modal -->
  <div *ngIf="showEditProjectModal" class="modal fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">Edit Project</h3>
          <button (click)="closeAllModals()" class="text-gray-400 hover:text-gray-600 text-base">
            <fa-icon [icon]="faTimes"></fa-icon>
          </button>
        </div>
        <form (ngSubmit)="updateProject()" #editProjectForm="ngForm">
          <div class="space-y-4">
            <div>
              <label for="editProjectName" class="block text-xs font-medium text-gray-500 required-field">Project Name</label>
              <input type="text" id="editProjectName" [(ngModel)]="selectedProject.name" name="editProjectName" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
            </div>
            <div>
              <label for="editProjectDescription" class="block text-xs font-medium text-gray-500 required-field">Description</label>
              <textarea id="editProjectDescription" rows="3" [(ngModel)]="selectedProject.description" name="editProjectDescription" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"></textarea>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="editProjectStartDate" class="block text-xs font-medium text-gray-500 required-field">Start Date</label>
                <input type="date" id="editProjectStartDate" [(ngModel)]="selectedProject.startDate" name="editProjectStartDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
              <div>
                <label for="editProjectEndDate" class="block text-xs font-medium text-gray-500 required-field">End Date</label>
                <input type="date" id="editProjectEndDate" [(ngModel)]="selectedProject.deadline" name="editProjectEndDate" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="editProjectTeam" class="block text-xs font-medium text-gray-500 required-field">Assigned Team</label>
                <select id="editProjectTeam" [(ngModel)]="selectedProject.team" name="editProjectTeam" required 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="">Select Team</option>
                  <option value="Development Team">Development Team</option>
                  <option value="Design Team">Design Team</option>
                  <option value="Marketing Team">Marketing Team</option>
                </select>
              </div>
              <div>
                <label for="editProjectStatus" class="block text-xs font-medium text-gray-500">Status</label>
                <select id="editProjectStatus" [(ngModel)]="selectedProject.status" name="editProjectStatus" 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="planning">Planning</option>
                  <option value="in-progress">In Progress</option>
                  <option value="on-hold">On Hold</option>
                  <option value="completed">Completed</option>
                </select>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label for="editProjectPriority" class="block text-xs font-medium text-gray-500">Priority</label>
                <select id="editProjectPriority" [(ngModel)]="selectedProject.priority" name="editProjectPriority" 
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                  <option value="low">Low</option>
                  <option value="medium">Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
              <div>
                <label for="editProjectProgress" class="block text-xs font-medium text-gray-500">Progress (%)</label>
                <input type="number" id="editProjectProgress" [(ngModel)]="selectedProject.progress" name="editProjectProgress" min="0" max="100"
                  class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
              </div>
            </div>
            <div>
              <label for="editProjectManager" class="block text-xs font-medium text-gray-500 required-field">Project Manager</label>
              <select id="editProjectManager" [(ngModel)]="selectedProject.manager" name="editProjectManager" required 
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                <option value="">Select Project Manager</option>
                <option value="John Doe">John Doe</option>
                <option value="Jane Smith">Jane Smith</option>
                <option value="Mike Johnson">Mike Johnson</option>
                <option value="Emily Davis">Emily Davis</option>
              </select>
            </div>
            <div>
              <label for="editProjectBudget" class="block text-xs font-medium text-gray-500">Budget ($)</label>
              <input type="number" id="editProjectBudget" [(ngModel)]="selectedProject.budget" name="editProjectBudget" min="0"
                class="block w-full px-3 py-1 mt-1 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm">
            </div>
            <div class="mt-6 flex justify-end space-x-3">
              <button type="button" (click)="closeAllModals()" class="px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50">
                Cancel
              </button>
              <button type="submit" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700">
                Save Changes
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Sprint Details Modal -->
  <div *ngIf="showSprintDetailsModal" class="modal fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">{{ selectedSprint?.name }}</h3>
          <button (click)="closeAllModals()" class="text-gray-400 hover:text-gray-600 text-base">
            <fa-icon [icon]="faTimes"></fa-icon>
          </button>
        </div>
        <div class="flex flex-col md:flex-row gap-6">
          <div class="w-full md:w-2/3">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
              <div>
                <label class="block text-xs font-medium text-gray-500">Project</label>
                <p class="text-sm mt-1 font-medium">{{ selectedSprint?.project }}</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">Status</label>
                <p class="text-sm mt-1" [ngClass]="{
                  'text-green-600': selectedSprint?.status === 'completed',
                  'text-blue-600': selectedSprint?.status === 'active',
                  'text-yellow-600': selectedSprint?.status === 'upcoming'
                }">
                  {{ selectedSprint?.status | titlecase }}
                </p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">Start Date</label>
                <p class="text-sm mt-1">{{ formatDate(selectedSprint?.startDate) }}</p>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-500">End Date</label>
                <p class="text-sm mt-1">{{ formatDate(selectedSprint?.endDate) }}</p>
              </div>
            </div>
            <div class="mb-4">
              <label class="block text-xs font-medium text-gray-500">Sprint Goal</label>
              <p class="text-sm mt-1">{{ selectedSprint?.goal }}</p>
            </div>
            <div class="mb-4">
              <label class="block text-xs font-medium text-gray-500">Description</label>
              <p class="text-sm mt-1">{{ selectedSprint?.description || 'No description provided' }}</p>
            </div>
            <div class="mb-4">
              <div class="flex justify-between items-center mb-3">
                <h4 class="text-sm font-medium text-gray-800">Tasks</h4>
                <button class="text-xs text-indigo-600 hover:text-indigo-800">Add Task</button>
              </div>
              <div class="space-y-2">
                <div class="bg-gray-50 p-3 rounded-lg" *ngFor="let task of selectedSprint?.tasks">
                  <div class="flex justify-between items-start">
                    <div>
                      <h4 class="text-xs font-medium text-gray-900">{{ task.name }}</h4>
                      <p class="text-xs text-gray-500 mt-1">Assigned to: {{ task.assignee }}</p>
                    </div>
                    <span class="text-xs px-2 py-1 rounded-full" 
                      [ngClass]="{
                        'bg-green-100 text-green-800': task.status === 'done',
                        'bg-blue-100 text-blue-800': task.status === 'in-progress',
                        'bg-gray-100 text-gray-800': task.status === 'todo'
                      }">
                      {{ task.status.replace('-', ' ') | titlecase }}
                    </span>
                  </div>
                  <div class="mt-2 grid grid-cols-2 gap-2 text-xs">
                    <div>
                      <p class="text-gray-500">Due Date</p>
                      <p class="text-gray-900">{{ formatDate(task.dueDate) }}</p>
                    </div>
                    <div>
                      <p class="text-gray-500">Priority</p>
                      <p class="text-gray-900">{{ task.priority | titlecase }}</p>
                    </div>
                  </div>
                  <div class="mt-2 flex justify-between items-center">
                    <div class="flex items-center">
                      <div class="w-16 mr-2">
                        <div class="w-full bg-gray-200 rounded-full h-1.5">
                          <div class="bg-indigo-600 h-1.5 rounded-full" 
                            [style.width]="task.status === 'done' ? '100%' : task.status === 'in-progress' ? '50%' : '0%'"></div>
                        </div>
                      </div>
                      <span class="text-xs text-gray-500">{{ task.estimatedHours }}h</span>
                    </div>
                    <div class="flex space-x-2">
                      <button class="text-xs text-indigo-600 hover:text-indigo-800">Edit</button>
                      <button class="text-xs text-red-600 hover:text-red-800">Delete</button>
                    </div>
                  </div>
                </div>
                <p class="text-xs text-gray-500" *ngIf="!selectedSprint?.tasks?.length">No tasks yet</p>
              </div>
            </div>
          </div>
          <div class="w-full md:w-1/3">
            <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
              <h4 class="text-sm font-medium text-gray-800 mb-3">Sprint Statistics</h4>
              <div class="space-y-3">
                <div>
                  <div class="flex justify-between text-xs mb-1">
                    <span>Tasks Completed</span>
                    <span>{{ selectedSprint?.stats?.tasksCompleted }}/{{ selectedSprint?.stats?.totalTasks }}</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="bg-green-500 h-1.5 rounded-full" 
                      [style.width]="(selectedSprint?.stats?.tasksCompleted / selectedSprint?.stats?.totalTasks) * 100 + '%'"></div>
                  </div>
                </div>
                <div>
                  <div class="flex justify-between text-xs mb-1">
                    <span>Time Spent</span>
                    <span>{{ selectedSprint?.stats?.timeSpent }} / {{ selectedSprint?.stats?.estimatedTime }} hours</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="bg-blue-500 h-1.5 rounded-full" 
                      [style.width]="(selectedSprint?.stats?.timeSpent / selectedSprint?.stats?.estimatedTime) * 100 + '%'"></div>
                  </div>
                </div>
                <div>
                  <div class="flex justify-between text-xs mb-1">
                    <span>Days Remaining</span>
                    <span>{{ calculateDaysRemaining(selectedSprint?.endDate) > 0 ? calculateDaysRemaining(selectedSprint?.endDate) + ' days' : 'Completed' }}</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="bg-purple-500 h-1.5 rounded-full" 
                      [style.width]="calculateSprintProgress(selectedSprint) + '%'"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-4 bg-gray-50 rounded-lg p-3 border border-gray-200">
              <h4 class="text-sm font-medium text-gray-800 mb-3">Team Members</h4>
              <div class="space-y-2">
                <div class="flex items-center" *ngFor="let member of teamMembers">
                  <div class="flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 text-xs">
                    {{ getInitials(member.name) }}
                  </div>
                  <div class="ml-2">
                    <p class="text-xs font-medium text-gray-900">{{ member.name }}</p>
                    <p class="text-xs text-gray-500">{{ member.role }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mt-6 flex justify-end space-x-3">
          <button (click)="deleteSprint()" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700">
            Delete Sprint
          </button>
          <button (click)="editSprint(selectedSprint?.id)" class="px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700">
            Edit Sprint
          </button>
        </div>
      </div>
    </div>
  </div>
</main>